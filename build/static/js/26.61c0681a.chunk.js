(window["webpackJsonpshreyu-react"]=window["webpackJsonpshreyu-react"]||[]).push([[26],{658:function(e,t,a){"use strict";a.r(t);var n=a(23),s=a(3),l=a.n(s),r=a(136),o=a(27),i=a(28),m=a(42),c=a(30),u=a(29),d=a(0),h=a.n(d),p=a(349),g=a(350),y=a(366),b=a(367),f=a(224),E=a(225),x=a(137),N=a.n(x),v=a(394),k=a.n(v),A=a(110),C=a.n(A),D=a(89),F=function(e){var t={chart:{sparkline:{enabled:!0}},stroke:{width:2,curve:"smooth"},yaxis:{min:0,max:e.ymax+50,labels:{formatter:function(e){return"Rs. ".concat(parseInt(e).toLocaleString())}}},colors:e.colors||["#008FFB"],title:{text:e.title,offsetX:10,offsetY:10,style:{fontSize:"24px"}},subtitle:{text:e.subtitle,offsetX:10,offsetY:45,style:{fontSize:"14px"}}},a=e.type||"bar",n=[{name:e.name||"Data",data:e.data||[]}];return h.a.createElement(y.a,null,h.a.createElement(b.a,{className:"p-0"},h.a.createElement(C.a,{className:"apex-charts",options:t,series:n,type:a,height:172})))},w=a(90),I=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(o.a)(this,a),(n=t.call(this,e)).onFilter=function(){var e=n.state,t=e.NewBookings,a=e.Installments,s=e.DateRange;if(2===s.length){for(var l={Amounts:[],Counts:[]},r={Amounts:[],Counts:[]},o=new Date(s[0]).getTime(),i=new Date(s[1]).getTime(),m=0,c=t.Amounts.length,u=0;u<c;u++){var d=t.Amounts[u];d[0]>=o&&d[0]<=i&&(l.Amounts[m]=t.Amounts[u],l.Counts[m++]=t.Counts[u])}m=0,c=a.Amounts.length;for(var h=0;h<c;h++){var p=a.Amounts[h];p[0]>=o&&p[0]<=i&&(r.Amounts[m]=a.Amounts[h],r.Counts[m++]=a.Counts[h])}n.setState({FilteredBookings:l,FilteredInstallments:r})}};var s=new Date;return s.setDate(s.getDate()-365),n.state={IsDataFetched:!1,IsDataFound:!1,SalesCards:[],NewBookings:{Amounts:[],Counts:[]},Installments:{Amounts:[],Counts:[]},FilteredBookings:{Amounts:[],Counts:[]},FilteredInstallments:{Amounts:[],Counts:[]},DailyClosing:{},DateRange:[s,new Date]},n.onFilter=n.onFilter.bind(Object(m.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(r.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat("https://attari-admin-api.herokuapp.com","/khyberCity/sales"));case 3:t=e.sent,this.setState({IsDataFetched:!0}),"Data found."===t.data.Message&&(this.setState({IsDataFound:!0,SalesCards:t.data.SalesCards,NewBookings:t.data.NewBookings,Installments:t.data.Installments,DailyClosing:t.data.DailyClosing}),this.onFilter()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState({IsDataFetched:!0});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.IsDataFetched,s=t.IsDataFound,l=t.SalesCards,r=t.NewBookings,o=t.Installments,i=t.DailyClosing,m=t.FilteredBookings,c=t.FilteredInstallments,u=t.DateRange;return s?h.a.createElement(h.a.Fragment,null,h.a.createElement(p.a,{className:"page-title"},h.a.createElement(g.a,{md:12},h.a.createElement(D.a,{breadCrumbItems:[{label:"Khyber City",path:"/khyberCity/sales"},{label:"Sales",path:"/khyberCity",active:!0}],title:"Sales"}))),h.a.createElement("h6",null,"THIS MONTH STATISTICS"),h.a.createElement(p.a,null,l.map((function(e,t){return h.a.createElement(g.a,{key:t,md:6,xl:3},h.a.createElement(F,{name:"Amount",type:"area",title:"Rs. ".concat(e.TotalAmount.toLocaleString()),subtitle:"".concat(e.Count," ").concat(e.Name),colors:[e.Color],ymax:Math.max.apply(Math,Object(n.a)(e.Amounts)),data:e.Amounts}))}))),h.a.createElement(y.a,null,h.a.createElement(b.a,null,h.a.createElement("h5",{className:"card-title header-title"},"Select Date Range"),h.a.createElement(f.a,{inline:!0},h.a.createElement(E.a,{className:"mb-2 mr-sm-2 mb-sm-0"},h.a.createElement(k.a,{value:u,onChange:function(t){e.setState({DateRange:t})},options:{mode:"range"},className:"form-control"})),h.a.createElement("div",{className:"btn-group ml-1"},h.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.onFilter},"Filter"),h.a.createElement("button",{type:"button",className:"btn btn-white",onClick:function(){e.setState({FilteredBookings:r,FilteredInstallments:o})}},"All"))))),h.a.createElement("h6",null,"Selected Range: ",h.a.createElement("span",{className:"text-info"},new Date(u[0]).toLocaleString("default",{year:"numeric",month:"long",day:"numeric"})),h.a.createElement("span",{className:"fas fa-arrow-right mx-1"}),h.a.createElement("span",{className:"text-info"},new Date(u[1]).toLocaleString("default",{year:"numeric",month:"long",day:"numeric"}))),h.a.createElement(y.a,null,h.a.createElement(b.a,{className:"pb-0"},h.a.createElement("h5",{className:"card-title mb-0 header-title"},"Plot Bookings",h.a.createElement("span",{className:"font-size-12 badge badge-info ml-2"},m.Amounts.length.toLocaleString())),h.a.createElement("div",{id:"-new-bookings-charts-wrapper"},h.a.createElement("div",{id:"new-bookings-chart-line"},h.a.createElement(C.a,{options:{chart:{group:"new-bookings",type:"line",height:160},dataLabels:{enabled:!1},colors:["#43D39E"],xaxis:{type:"datetime"},yaxis:{title:{text:"Number of Bookings"},labels:{minWidth:80,formatter:function(e){return"".concat(parseInt(e).toLocaleString())}},tooltip:{x:{format:"dd MMM yyyy"}}}},series:[{name:"Number of Bookings",data:m.Counts}],type:"line",className:"apex-charts mt-3",height:160})),h.a.createElement("div",{id:"new-bookings-chart-area"},h.a.createElement(C.a,{options:{chart:{group:"new-bookings",type:"area",height:300},dataLabels:{enabled:!1},colors:["#25C2E3"],xaxis:{type:"datetime",title:{text:"Booking Dates"}},yaxis:{title:{text:"Booking Amounts"},labels:{minWidth:80,formatter:function(e){return"Rs. ".concat(parseInt(e).toLocaleString())}}},tooltip:{x:{format:"dd MMM yyyy"}}},series:[{name:"Amount",data:m.Amounts}],type:"area",className:"apex-charts mt-3",height:200}))))),h.a.createElement(y.a,null,h.a.createElement(b.a,{className:"pb-0"},h.a.createElement("h5",{className:"card-title mb-0 header-title"},"Installments",h.a.createElement("span",{className:"font-size-12 badge badge-info ml-2"},c.Amounts.length.toLocaleString())),h.a.createElement("div",{id:"installments-charts-wrapper"},h.a.createElement("div",{id:"installments-chart-line"},h.a.createElement(C.a,{options:{chart:{group:"installments",type:"line",height:200},dataLabels:{enabled:!1},colors:["#FFBE0B"],xaxis:{type:"datetime"},yaxis:{title:{text:"Number of Installments"},labels:{minWidth:80,formatter:function(e){return"".concat(parseInt(e).toLocaleString())}},tooltip:{x:{format:"dd MMM yyyy"}}}},series:[{name:"Number of Installments",data:c.Counts}],type:"line",className:"apex-charts mt-3",height:200})),h.a.createElement("div",{id:"installments-chart-area"},h.a.createElement(C.a,{options:{chart:{group:"installments",type:"area",height:300},dataLabels:{enabled:!1},colors:["#5369F8"],xaxis:{type:"datetime",title:{text:"Installment Dates"}},yaxis:{title:{text:"Installments Amounts"},labels:{minWidth:80,formatter:function(e){return"Rs. ".concat(parseInt(e).toLocaleString())}}},tooltip:{x:{format:"dd MMM yyyy"}}},series:[{name:"Amount",data:c.Amounts}],type:"area",className:"apex-charts mt-3",height:200}))))),h.a.createElement(y.a,null,h.a.createElement(b.a,{className:"pb-0"},h.a.createElement("h5",{className:"card-title mb-0 header-title"},"Daily Closing Statistics"),h.a.createElement(C.a,{options:{chart:{type:"bar",stacked:!0,height:600},dataLabels:{enabled:!1},colors:["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#A493DF","#DF93A4"],xaxis:{type:"datetime",title:{text:"Dates"}},yaxis:{title:{text:"Amounts"},labels:{minWidth:80,formatter:function(e){return"Rs. ".concat(parseInt(e).toLocaleString())}},tooltip:{x:{format:"dd MMM yyyy"}}}},series:[{name:"New Bookings",data:i.NewBookingAmounts},{name:"Installments",data:i.InstallmentAmounts},{name:"Other Transactions",data:i.OtherTransactionAmounts},{name:"Online Transfers",data:i.OnlineTransferAmounts},{name:"Expenses",data:i.ExpensesAmounts},{name:"Cash in Hand",data:i.CashInHandAmounts},{name:"Plot Transfers",data:i.PlotTransferAmounts}],type:"bar",className:"apex-charts mt-3",height:600})))):h.a.createElement(w.a,{isDataFetched:a,retryLink:"/khyberCity/sales"})}}]),a}(h.a.Component);t.default=I},89:function(e,t,a){"use strict";var n=a(0),s=a.n(n),l=a(31),r=a(352),o=a(353);t.a=function(e){var t=e.title||"",a=e.breadCrumbItems||"";return s.a.createElement(s.a.Fragment,null,s.a.createElement(r.a,{className:"float-right mt-1 font-size-14"},s.a.createElement(o.a,null,s.a.createElement(l.b,{to:"/"},"Attari Admin")),a.map((function(e,t){return e.active?s.a.createElement(o.a,{active:!0,key:t},e.label):s.a.createElement(o.a,{key:t},s.a.createElement(l.b,{to:e.path},e.label))}))),s.a.createElement("h4",{className:"mb-1 mt-0"},t))}},90:function(e,t,a){"use strict";var n=a(27),s=a(28),l=a(30),r=a(29),o=a(0),i=a.n(o),m=a(244),c=a(349),u=a(350),d=a(157),h=a(371),p=a(91),g=a.n(p),y=a(92),b=a.n(y),f=["primary","primary","primary"],E=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){return Object(n.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){document.body.classList.add("authentication-bg")}},{key:"componentWillUnmount",value:function(){document.body.classList.remove("authentication-bg")}},{key:"render",value:function(){var e=this.props,t=e.isDataFetched;e.retryLink;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"my-5"},i.a.createElement(m.a,null,t?i.a.createElement("div",null,i.a.createElement(c.a,{className:"justify-content-center"},i.a.createElement(u.a,{xl:4,lg:5},i.a.createElement("div",{className:"text-center"},i.a.createElement("div",null,i.a.createElement("img",{src:g.a,alt:"",className:"img-fluid"}))))),i.a.createElement(c.a,null,i.a.createElement(u.a,{className:"text-center"},i.a.createElement("h3",{className:"mt-3"},"Oops! Something went wrong."),i.a.createElement("p",{className:"text-muted mb-2"},"Failed to fetch data from the server.",i.a.createElement("br",null)," Please try again!"),i.a.createElement(d.a,{className:"btn btn-lg btn-primary mt-4",onClick:function(){window.location.reload()}},"Retry")))):i.a.createElement("div",null,i.a.createElement(c.a,{className:"justify-content-center"},i.a.createElement(u.a,{xl:4,lg:5},i.a.createElement("div",{className:"text-center"},i.a.createElement("div",null,i.a.createElement("img",{src:b.a,alt:"",className:"img-fluid"}))))),i.a.createElement(c.a,null,i.a.createElement(u.a,{className:"text-center"},i.a.createElement("h3",{className:"mt-3"},"Loading"),i.a.createElement("div",null,f.map((function(e,t){return i.a.createElement(h.a,{key:t,className:"m-2",size:"sm",type:"grow",color:e})})))))))))}}]),a}(o.Component);t.a=E},91:function(e,t,a){e.exports=a.p+"static/media/fetch-failed.d47b94a0.svg"},92:function(e,t,a){e.exports=a.p+"static/media/searching.fdf701a1.svg"}}]);
//# sourceMappingURL=26.61c0681a.chunk.js.map