{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\Projects\\\\tobesendtobiba11apr23\\\\client\\\\src\\\\pages\\\\khyberCity\\\\Attendance\\\\Attendance.js\";\n\nimport React, { useState } from \"react\";\nimport Chart from \"react-apexcharts\";\nimport classNames from \"classnames\";\nimport { Row, Col, Card, CardBody, Button, Media, Modal, ModalHeader, ModalBody, ModalFooter, Spinner, Progress, UncontrolledTooltip, Container, Form, FormGroup, Input } from \"reactstrap\";\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport BootstrapTheme from '@fullcalendar/bootstrap';\nimport listPlugin from '@fullcalendar/list';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport axios from \"axios\";\nimport PageTitle from \"../../../components/PageTitle\";\nimport Preloader from \"../../../components/Preloader\";\nimport NoDataSVG from \"../../../assets/images/no-data.svg\";\nimport EmployeeMaleSVG from \"../../../assets/images/employee-male.svg\";\nimport EmployeeFemaleSVG from \"../../../assets/images/employee-female.svg\";\n\nvar AttendanceCalendar = function AttendanceCalendar(props) {\n  var staffMember = props.staffMember;\n  var events = staffMember.Attendance.map(function (attendanceRecord) {\n    var checkTime = new Date(attendanceRecord.CheckTime);\n    checkTime.setMinutes(checkTime.getMinutes() + checkTime.getTimezoneOffset());\n    return {\n      id: attendanceRecord.ID,\n      title: attendanceRecord.IsCheckIn ? \"Check-In\" : \"Check-Out\",\n      start: checkTime,\n      className: \"bg-\".concat(attendanceRecord.IsCheckIn ? \"success\" : \"warning\", \" text-white font-size-10\")\n    };\n  });\n  var haveAttendance = staffMember.Attendance.length > 0 ? true : false;\n  var checkTime = null;\n  var latestAttendance = null;\n\n  if (haveAttendance) {\n    checkTime = new Date(staffMember.Attendance[0].CheckTime);\n    checkTime.setMinutes(checkTime.getMinutes() + checkTime.getTimezoneOffset());\n    latestAttendance = {\n      Date: checkTime.toLocaleString(\"en-US\", {\n        day: \"numeric\",\n        year: \"numeric\",\n        month: \"long\"\n      }),\n      Time: checkTime.toLocaleString(\"en-US\", {\n        hour: \"numeric\",\n        minute: \"numeric\"\n      }),\n      IsCheckIn: staffMember.Attendance[0].IsCheckIn\n    };\n  }\n\n  return /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"border-botton\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: 2,\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: staffMember.Gender === \"M\" ? EmployeeMaleSVG : EmployeeFemaleSVG,\n    alt: \"Employee\",\n    className: \"avatar-xl rounded-circle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    lg: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, staffMember.Name), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-muted font-weight-normal mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, staffMember.Title), haveAttendance ? latestAttendance.IsCheckIn ? /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-muted font-weight-normal mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-sm badge-soft-success py-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fas fa-clock mr-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }), \"Checked in on \".concat(latestAttendance.Date, \" at \").concat(latestAttendance.Time, \".\"))) : /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-muted font-weight-normal mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-sm badge-soft-info py-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fas fa-clock mr-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 29\n    }\n  }), \"Checked out on \".concat(latestAttendance.Date, \" at \").concat(latestAttendance.Time, \".\"))) : /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-muted font-weight-normal mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"badge badge-sm badge-soft-danger py-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fas fa-clock mr-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }), \"No check-in | check-out record found.\")))), /*#__PURE__*/React.createElement(FullCalendar, {\n    defaultView: \"dayGridMonth\",\n    plugins: [BootstrapTheme, dayGridPlugin, interactionPlugin, timeGridPlugin, listPlugin],\n    themeSystem: \"bootstrap\",\n    handleWindowResize: true,\n    bootstrapFontAwesome: false,\n    buttonText: {\n      today: 'Today',\n      month: 'Month',\n      week: 'Week',\n      day: 'Day',\n      list: 'List',\n      prev: 'Prev',\n      next: 'Next'\n    },\n    header: {\n      left: 'prev,next today',\n      center: 'title',\n      right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'\n    },\n    droppable: false,\n    editable: false,\n    eventLimit: false // allow \"more\" link when too many events\n    ,\n    selectable: false,\n    events: events,\n    id: \"calendar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  })));\n};\n\nvar Attendance = /*#__PURE__*/function (_React$Component) {\n  _inherits(Attendance, _React$Component);\n\n  var _super = _createSuper(Attendance);\n\n  function Attendance(props) {\n    var _this2;\n\n    _classCallCheck(this, Attendance);\n\n    _this2 = _super.call(this, props);\n    _this2.state = {\n      IsDataFetched: false,\n      IsDataFound: false,\n      Staff: [],\n      StaffNames: [],\n      SelectedIndex: -1,\n      SelectedMember: null\n    };\n    return _this2;\n  }\n\n  _createClass(Attendance, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response, staff;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return axios.get(\"\".concat(process.env.REACT_APP_SERVER_URL, \"/khyberCity/staffAttendance\"));\n\n              case 3:\n                response = _context.sent;\n                this.setState({\n                  IsDataFetched: true\n                });\n\n                if (response.data.Message === \"Data found.\") {\n                  staff = response.data.Staff;\n                  this.setState({\n                    IsDataFound: true,\n                    Staff: staff,\n                    StaffNames: staff.map(function (item) {\n                      return item.Name;\n                    }),\n                    SelectedIndex: staff.length > 0 ? 0 : -1,\n                    SelectedMember: staff.length > 0 ? staff[0] : null\n                  });\n                }\n\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                this.setState({\n                  IsDataFetched: true\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 8]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          IsDataFetched = _this$state.IsDataFetched,\n          IsDataFound = _this$state.IsDataFound,\n          StaffNames = _this$state.StaffNames,\n          SelectedIndex = _this$state.SelectedIndex,\n          SelectedMember = _this$state.SelectedMember;\n      return IsDataFound ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        className: \"page-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: 12,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(PageTitle, {\n        breadCrumbItems: [{\n          label: \"Khyber City\",\n          path: \"/khyberCity/sales\"\n        }, {\n          label: \"Attendance\",\n          path: \"/khyberCity/attendance\",\n          active: true\n        }],\n        title: \"Attendance\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }\n      }))), StaffNames.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        inline: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"mb-2 mr-sm-2 mb-sm-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"StaffNames\",\n        value: SelectedIndex,\n        onChange: function onChange(event) {\n          var Staff = _this3.state.Staff;\n\n          _this3.setState({\n            SelectedIndex: event.target.value,\n            SelectedMember: Staff[event.target.value]\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 33\n        }\n      }, StaffNames.map(function (staffName, index) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          key: index,\n          value: index,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 48\n          }\n        }, staffName);\n      })))))), /*#__PURE__*/React.createElement(AttendanceCalendar, {\n        staffMember: SelectedMember,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 17\n        }\n      })) : /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        className: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        xl: 4,\n        lg: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: NoDataSVG,\n        alt: \"\",\n        className: \"img-fluid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 33\n        }\n      }))))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"mt-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 25\n        }\n      }, \"No attendance records found.\"))))) : /*#__PURE__*/React.createElement(Preloader, {\n        isDataFetched: IsDataFetched,\n        retryLink: \"/khyberCity/attendance\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 5\n        }\n      });\n    }\n  }]);\n\n  return Attendance;\n}(React.Component);\n\n;\nexport default Attendance;","map":{"version":3,"sources":["E:/Projects/tobesendtobiba11apr23/client/src/pages/khyberCity/Attendance/Attendance.js"],"names":["React","useState","Chart","classNames","Row","Col","Card","CardBody","Button","Media","Modal","ModalHeader","ModalBody","ModalFooter","Spinner","Progress","UncontrolledTooltip","Container","Form","FormGroup","Input","FullCalendar","dayGridPlugin","interactionPlugin","BootstrapTheme","listPlugin","timeGridPlugin","axios","PageTitle","Preloader","AttendanceCalendar","props","staffMember","events","Attendance","map","attendanceRecord","checkTime","Date","CheckTime","setMinutes","getMinutes","getTimezoneOffset","id","ID","title","IsCheckIn","start","className","haveAttendance","length","latestAttendance","toLocaleString","day","year","month","Time","hour","minute","Gender","EmployeeMaleSVG","EmployeeFemaleSVG","Name","Title","today","week","list","prev","next","left","center","right","state","IsDataFetched","IsDataFound","Staff","StaffNames","SelectedIndex","SelectedMember","get","process","env","REACT_APP_SERVER_URL","response","setState","data","Message","staff","item","label","path","active","event","target","value","staffName","index","NoDataSVG","Component"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Chart from \"react-apexcharts\";\r\nimport classNames from \"classnames\";\r\n\r\nimport { \r\n    Row, Col, Card, CardBody, \r\n    Button, Media, Modal, ModalHeader, \r\n    ModalBody, ModalFooter, Spinner, Progress, \r\n    UncontrolledTooltip, \r\n    Container,\r\n    Form, FormGroup, Input, } from \"reactstrap\";\r\n\r\nimport FullCalendar from '@fullcalendar/react';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport BootstrapTheme from '@fullcalendar/bootstrap';\r\nimport listPlugin from '@fullcalendar/list';\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\n\r\nimport axios from \"axios\";\r\n\r\nimport PageTitle from \"../../../components/PageTitle\";\r\nimport Preloader from \"../../../components/Preloader\";\r\n\r\nimport NoDataSVG from \"../../../assets/images/no-data.svg\";\r\nimport EmployeeMaleSVG from \"../../../assets/images/employee-male.svg\";\r\nimport EmployeeFemaleSVG from \"../../../assets/images/employee-female.svg\";\r\n\r\nconst AttendanceCalendar = (props) => {\r\n    const { staffMember } = props;\r\n\r\n    const events = staffMember.Attendance.map(attendanceRecord => {\r\n        let checkTime = new Date(attendanceRecord.CheckTime);\r\n        checkTime.setMinutes(checkTime.getMinutes() + checkTime.getTimezoneOffset());\r\n\r\n        return {\r\n            id: attendanceRecord.ID,\r\n            title: attendanceRecord.IsCheckIn ? \"Check-In\" : \"Check-Out\",\r\n            start: checkTime,\r\n            className: `bg-${attendanceRecord.IsCheckIn ? \"success\" : \"warning\" } text-white font-size-10`,\r\n        };\r\n    });\r\n\r\n    const haveAttendance = staffMember.Attendance.length > 0 ? true : false;\r\n\r\n    let checkTime = null; \r\n    let latestAttendance = null;\r\n\r\n    if (haveAttendance) {\r\n        checkTime = new Date(staffMember.Attendance[0].CheckTime);\r\n        checkTime.setMinutes(checkTime.getMinutes() + checkTime.getTimezoneOffset());\r\n    \r\n        latestAttendance = {\r\n            Date: checkTime.toLocaleString(\"en-US\", {\r\n                day: \"numeric\", \r\n                year: \"numeric\",\r\n                month: \"long\",\r\n            }),\r\n            Time: checkTime.toLocaleString(\"en-US\", {\r\n                hour: \"numeric\",\r\n                minute: \"numeric\",\r\n            }),\r\n            IsCheckIn: staffMember.Attendance[0].IsCheckIn, \r\n        };\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardBody>\r\n                <Row className=\"border-botton\">\r\n                    <Col lg={2} className=\"text-center\">\r\n                    <img src={staffMember.Gender === \"M\" ? EmployeeMaleSVG : EmployeeFemaleSVG} alt=\"Employee\"\r\n                        className=\"avatar-xl rounded-circle\" />\r\n                    </Col>\r\n                    <Col lg={10}>\r\n                    <h5 className=\"mb-0\">{staffMember.Name}</h5>\r\n                    <h6 className=\"text-muted font-weight-normal mb-0\">{staffMember.Title}</h6>\r\n\r\n                    {haveAttendance ? \r\n                        latestAttendance.IsCheckIn ?\r\n                        <h6 className=\"text-muted font-weight-normal mt-2\">\r\n                            <span className={`badge badge-sm badge-soft-success py-1`}>\r\n                            <span className={`fas fa-clock mr-1`} />{`Checked in on ${latestAttendance.Date} at ${latestAttendance.Time}.`}</span>\r\n                        </h6> : <h6 className=\"text-muted font-weight-normal mt-2\">\r\n                            <span className={`badge badge-sm badge-soft-info py-1`}>\r\n                            <span className={`fas fa-clock mr-1`} />{`Checked out on ${latestAttendance.Date} at ${latestAttendance.Time}.`}</span>\r\n                        </h6> :\r\n                        <h6 className=\"text-muted font-weight-normal mt-2\">\r\n                            <span className={`badge badge-sm badge-soft-danger py-1`}>\r\n                            <span className={`fas fa-clock mr-1`} />{\"No check-in | check-out record found.\"}</span>\r\n                    </h6>}\r\n                    </Col>\r\n                </Row>\r\n                <FullCalendar\r\n                    defaultView=\"dayGridMonth\"\r\n                    plugins={[BootstrapTheme, dayGridPlugin, interactionPlugin, timeGridPlugin, listPlugin]}\r\n                    themeSystem='bootstrap'\r\n                    handleWindowResize={true}\r\n                    bootstrapFontAwesome={false}\r\n                    buttonText={{today: 'Today', month: 'Month', week: 'Week', day: 'Day', list: 'List', prev: 'Prev', next: 'Next' }}\r\n                    header={{\r\n                        left: 'prev,next today',\r\n                        center: 'title',\r\n                        right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'\r\n                    }}\r\n                    droppable={false}\r\n                    editable={false}\r\n                    eventLimit={false} // allow \"more\" link when too many events\r\n                    selectable={false}\r\n                    events={events}\r\n                    id=\"calendar\"\r\n                />\r\n            </CardBody>\r\n        </Card>\r\n    );\r\n};\r\n\r\nclass Attendance extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            IsDataFetched: false,\r\n            IsDataFound: false,\r\n            Staff: [],\r\n            StaffNames: [],\r\n            SelectedIndex: -1,\r\n            SelectedMember: null,\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            const response = await axios.get(`${process.env.REACT_APP_SERVER_URL}/khyberCity/staffAttendance`);\r\n\r\n            this.setState({\r\n                IsDataFetched: true,\r\n            });\r\n\r\n            if (response.data.Message === \"Data found.\") {\r\n                const staff = response.data.Staff;\r\n\r\n                this.setState({\r\n                    IsDataFound: true,\r\n                    Staff: staff,\r\n                    StaffNames: staff.map(item => item.Name),\r\n                    SelectedIndex: staff.length > 0 ? 0 : -1,\r\n                    SelectedMember: staff.length > 0 ? staff[0] : null\r\n                });\r\n            }      \r\n        } catch (error) {\r\n            this.setState({\r\n                IsDataFetched: true,\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            IsDataFetched,\r\n            IsDataFound,\r\n            StaffNames,\r\n            SelectedIndex,\r\n            SelectedMember,\r\n        } = this.state;\r\n\r\n        return IsDataFound? \r\n        <React.Fragment>\r\n        <Row className=\"page-title\">\r\n            <Col md={12}>\r\n                <PageTitle\r\n                    breadCrumbItems={[\r\n                        { label: \"Khyber City\", path: \"/khyberCity/sales\" },\r\n                        { label: \"Attendance\", path: \"/khyberCity/attendance\", active: true },\r\n                    ]}\r\n                    title={\"Attendance\"}\r\n                />\r\n            </Col>\r\n        </Row>\r\n\r\n        {StaffNames.length > 0 ?\r\n            <React.Fragment>\r\n                <Card>\r\n                    <CardBody>\r\n                        <Form inline>\r\n                            <FormGroup className=\"mb-2 mr-sm-2 mb-sm-0\">\r\n                                <Input type=\"select\" name=\"StaffNames\"\r\n                                    value={SelectedIndex}\r\n                                    onChange={event => {\r\n                                        const { \r\n                                            Staff\r\n                                         } = this.state;\r\n\r\n                                        this.setState({\r\n                                            SelectedIndex: event.target.value,\r\n                                            SelectedMember: Staff[event.target.value]\r\n                                        });\r\n                                    }}>\r\n                                    {StaffNames.map((staffName, index) => {\r\n                                        return <option key={index} value={index}>{staffName}</option>;\r\n                                    })}\r\n                                </Input>\r\n                            </FormGroup>\r\n                        </Form>\r\n                    </CardBody>\r\n                </Card>\r\n\r\n                <AttendanceCalendar \r\n                    staffMember={SelectedMember} />\r\n            </React.Fragment> : \r\n            <Container>\r\n                <Row className=\"justify-content-center\">\r\n                    <Col xl={4} lg={5}>\r\n                        <div className=\"text-center\">\r\n                            <div>\r\n                                <img src={NoDataSVG} alt=\"\" className=\"img-fluid\" />\r\n                            </div>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col className=\"text-center\">\r\n                        <h3 className=\"mt-3\">No attendance records found.</h3>\r\n                    </Col>\r\n                </Row>\r\n            </Container>}\r\n    </React.Fragment> : \r\n    <Preloader \r\n        isDataFetched={IsDataFetched}\r\n        retryLink={\"/khyberCity/attendance\"} />;\r\n    }\r\n};\r\n\r\nexport default Attendance;"]},"metadata":{},"sourceType":"module"}