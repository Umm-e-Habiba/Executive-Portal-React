{"ast":null,"code":"export function configureFakeBackend() {\n  var users = [{\n    id: 1,\n    username: 'admin',\n    password: 'gt327567ADMIN',\n    firstName: 'Saif',\n    lastName: 'Ur Rehman',\n    role: 'Admin'\n  }];\n  var realFetch = window.fetch;\n\n  window.fetch = function (url, opts) {\n    return new Promise(function (resolve, reject) {\n      // wrap in timeout to simulate server api call\n      setTimeout(function () {\n        // authenticate\n        if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n          // get parameters from post request\n          var params = JSON.parse(opts.body); // find if any user matches login credentials\n\n          var filteredUsers = users.filter(function (user) {\n            return user.username === params.username && user.password === params.password;\n          });\n\n          if (filteredUsers.length) {\n            // if login details are valid return user details and fake jwt token\n            var user = filteredUsers[0];\n            var responseJson = {\n              id: user.id,\n              username: user.username,\n              firstName: user.firstName,\n              lastName: user.lastName,\n              role: 'Admin',\n              token: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlcnRoZW1lIiwiaWF0IjoxNTU1NjgyNTc1LCJleHAiOjE1ODcyMTg1NzUsImF1ZCI6ImNvZGVydGhlbWVzLmNvbSIsInN1YiI6InRlc3QiLCJmaXJzdG5hbWUiOiJIeXBlciIsImxhc3RuYW1lIjoiVGVzdCIsIkVtYWlsIjoidGVzdEBoeXBlci5jb2RlcnRoZW1lcy5jb20iLCJSb2xlIjoiQWRtaW4ifQ.8qHJDbs5nw4FBTr3F8Xc1NJYOMSJmGnRma7pji0YwB4'\n            };\n            resolve({\n              ok: true,\n              json: function json() {\n                return responseJson;\n              }\n            });\n          } else {\n            // else return error\n            reject('Username or password is incorrect');\n          }\n\n          return;\n        } // forget password\n\n\n        if (url.endsWith('/users/password-reset') && opts.method === 'POST') {\n          // get parameters from post request\n          var _params = JSON.parse(opts.body); // find if any user matches login credentials\n\n\n          var _filteredUsers = users.filter(function (user) {\n            return user.username === _params.username;\n          });\n\n          if (_filteredUsers.length) {\n            var _responseJson = {\n              message: \"We've sent you a link to reset password to your registered email.\"\n            };\n            resolve({\n              ok: true,\n              json: function json() {\n                return _responseJson;\n              }\n            });\n          } else {\n            // else return error\n            reject('Sorry, we could not find any registered user with entered username');\n          }\n\n          return;\n        } // get users\n\n\n        if (url.endsWith('/users') && opts.method === 'GET') {\n          // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\n          if (opts.headers && opts.headers.Authorization === 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlcnRoZW1lIiwiaWF0IjoxNTU1NjgyNTc1LCJleHAiOjE1ODcyMTg1NzUsImF1ZCI6ImNvZGVydGhlbWVzLmNvbSIsInN1YiI6InRlc3QiLCJmaXJzdG5hbWUiOiJIeXBlciIsImxhc3RuYW1lIjoiVGVzdCIsIkVtYWlsIjoidGVzdEBoeXBlci5jb2RlcnRoZW1lcy5jb20iLCJSb2xlIjoiQWRtaW4ifQ.8qHJDbs5nw4FBTr3F8Xc1NJYOMSJmGnRma7pji0YwB4') {\n            resolve({\n              ok: true,\n              json: function json() {\n                return users;\n              }\n            });\n          } else {\n            // return 401 not authorised if token is null or invalid\n            reject('Unauthorised');\n          }\n\n          return;\n        } // pass through any requests not handled above\n\n\n        realFetch(url, opts).then(function (response) {\n          return resolve(response);\n        });\n      }, 500);\n    });\n  };\n}","map":{"version":3,"sources":["E:/Projects/tobesendtobiba11apr23/client/src/helpers/Backend.js"],"names":["configureFakeBackend","users","id","username","password","firstName","lastName","role","realFetch","window","fetch","url","opts","Promise","resolve","reject","setTimeout","endsWith","method","params","JSON","parse","body","filteredUsers","filter","user","length","responseJson","token","ok","json","message","headers","Authorization","then","response"],"mappings":"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","sourcesContent":["export function configureFakeBackend() {\n    let users = [{ id: 1, username: 'admin', password: 'gt327567ADMIN', firstName: 'Saif', lastName: 'Ur Rehman', role: 'Admin' }];\n    let realFetch = window.fetch;\n    window.fetch = function(url, opts) {\n        return new Promise((resolve, reject) => {\n            // wrap in timeout to simulate server api call\n            setTimeout(() => {\n                // authenticate\n                if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n                    // get parameters from post request\n                    let params = JSON.parse(opts.body);\n\n                    // find if any user matches login credentials\n                    let filteredUsers = users.filter(user => {\n                        return user.username === params.username && user.password === params.password;\n                    });\n\n                    if (filteredUsers.length) {\n                        // if login details are valid return user details and fake jwt token\n                        let user = filteredUsers[0];\n                        let responseJson = {\n                            id: user.id,\n                            username: user.username,\n                            firstName: user.firstName,\n                            lastName: user.lastName,\n                            role: 'Admin',\n                            token:\n                                'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlcnRoZW1lIiwiaWF0IjoxNTU1NjgyNTc1LCJleHAiOjE1ODcyMTg1NzUsImF1ZCI6ImNvZGVydGhlbWVzLmNvbSIsInN1YiI6InRlc3QiLCJmaXJzdG5hbWUiOiJIeXBlciIsImxhc3RuYW1lIjoiVGVzdCIsIkVtYWlsIjoidGVzdEBoeXBlci5jb2RlcnRoZW1lcy5jb20iLCJSb2xlIjoiQWRtaW4ifQ.8qHJDbs5nw4FBTr3F8Xc1NJYOMSJmGnRma7pji0YwB4',\n                        };\n                        resolve({ ok: true, json: () => responseJson });\n                    } else {\n                        // else return error\n                        reject('Username or password is incorrect');\n                    }\n                    return;\n                }\n\n                // forget password\n                if (url.endsWith('/users/password-reset') && opts.method === 'POST') {\n                    // get parameters from post request\n                    let params = JSON.parse(opts.body);\n\n                    // find if any user matches login credentials\n                    let filteredUsers = users.filter(user => {\n                        return user.username === params.username;\n                    });\n\n                    if (filteredUsers.length) {\n                        let responseJson = {\n                            message: \"We've sent you a link to reset password to your registered email.\",\n                        };\n                        resolve({ ok: true, json: () => responseJson });\n                    } else {\n                        // else return error\n                        reject('Sorry, we could not find any registered user with entered username');\n                    }\n                    return;\n                }\n\n                // get users\n                if (url.endsWith('/users') && opts.method === 'GET') {\n                    // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\n                    if (\n                        opts.headers &&\n                        opts.headers.Authorization ===\n                            'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlcnRoZW1lIiwiaWF0IjoxNTU1NjgyNTc1LCJleHAiOjE1ODcyMTg1NzUsImF1ZCI6ImNvZGVydGhlbWVzLmNvbSIsInN1YiI6InRlc3QiLCJmaXJzdG5hbWUiOiJIeXBlciIsImxhc3RuYW1lIjoiVGVzdCIsIkVtYWlsIjoidGVzdEBoeXBlci5jb2RlcnRoZW1lcy5jb20iLCJSb2xlIjoiQWRtaW4ifQ.8qHJDbs5nw4FBTr3F8Xc1NJYOMSJmGnRma7pji0YwB4'\n                    ) {\n                        resolve({ ok: true, json: () => users });\n                    } else {\n                        // return 401 not authorised if token is null or invalid\n                        reject('Unauthorised');\n                    }\n\n                    return;\n                }\n\n                // pass through any requests not handled above\n                realFetch(url, opts).then(response => resolve(response));\n            }, 500);\n        });\n    };\n}\n"]},"metadata":{},"sourceType":"module"}